#include <Game/Pieces.hpp>

namespace Core {
namespace Game {
    
    // 7 Mino variants, 4 possible rotations 4x4 grids
    Tile tiles[7 * 4 * 4 * 4] = {
        // T Piece
        -1, 0,-1,-1,
         0, 0, 0,-1,
        -1,-1,-1,-1,
        -1,-1,-1,-1,
        
        -1, 0,-1,-1,
        -1, 0, 0,-1,
        -1, 0,-1,-1,
        -1,-1,-1,-1,

        -1,-1,-1,-1,
         0, 0, 0,-1,
        -1, 0,-1,-1,
        -1,-1,-1,-1,
        
        -1, 0,-1,-1,
         0, 0,-1,-1,
        -1, 0,-1,-1,
        -1,-1,-1,-1,

        // O Piece
        -1, 1, 1,-1,
        -1, 1, 1,-1,
        -1,-1,-1,-1,
        -1,-1,-1,-1,

        -1, 1, 1,-1,
        -1, 1, 1,-1,
        -1,-1,-1,-1,
        -1,-1,-1,-1,

        -1, 1, 1,-1,
        -1, 1, 1,-1,
        -1,-1,-1,-1,
        -1,-1,-1,-1,

        -1, 1, 1,-1,
        -1, 1, 1,-1,
        -1,-1,-1,-1,
        -1,-1,-1,-1,

        // L Piece
        -1,-1, 2,-1,
         2, 2, 2,-1,
        -1,-1,-1,-1,
        -1,-1,-1,-1,

        -1, 2,-1,-1,
        -1, 2,-1,-1,
        -1, 2, 2,-1,
        -1,-1,-1,-1,

        -1,-1,-1,-1,
         2, 2, 2,-1,
         2,-1,-1,-1,
        -1,-1,-1,-1,

         2, 2,-1,-1,
        -1, 2,-1,-1,
        -1, 2,-1,-1,
        -1,-1,-1,-1,
        
        // J Piece
         3,-1,-1,-1,
         3, 3, 3,-1,
        -1,-1,-1,-1,
        -1,-1,-1,-1,

        -1, 3, 3,-1,
        -1, 3,-1,-1,
        -1, 3,-1,-1,
        -1,-1,-1,-1,

        -1,-1,-1,-1,
         3, 3, 3,-1,
        -1,-1, 3,-1,
        -1,-1,-1,-1,

        -1, 3,-1,-1,
        -1, 3,-1,-1,
         3, 3,-1,-1,
        -1,-1,-1,-1,

        // Z Piece
         4, 4,-1,-1,
        -1, 4, 4,-1,
        -1,-1,-1,-1,
        -1,-1,-1,-1,

        -1,-1, 4,-1,
        -1, 4, 4,-1,
        -1, 4,-1,-1,
        -1,-1,-1,-1,

        -1,-1,-1,-1,
         4, 4,-1,-1,
        -1, 4, 4,-1,
        -1,-1,-1,-1,

        -1, 4,-1,-1,
         4, 4,-1,-1,
         4,-1,-1,-1,
        -1,-1,-1,-1,
        
        // S Piece
        -1, 5, 5,-1,
         5, 5,-1,-1,
        -1,-1,-1,-1,
        -1,-1,-1,-1,
        
        -1, 5,-1,-1,
        -1, 5, 5,-1,
        -1,-1, 5,-1,
        -1,-1,-1,-1,

        -1,-1,-1,-1,
        -1, 5, 5,-1,
         5, 5,-1,-1,
        -1,-1,-1,-1,

         5,-1,-1,-1,
         5, 5,-1,-1,
        -1, 5,-1,-1,
        -1,-1,-1,-1,
        
        // I Piece

        -1,-1,-1,-1,
         6, 6, 6, 6,
        -1,-1,-1,-1,
        -1,-1,-1,-1,

        -1,-1, 6,-1,
        -1,-1, 6,-1,
        -1,-1, 6,-1,
        -1,-1, 6,-1,

        -1,-1,-1,-1,
        -1,-1,-1,-1,
         6, 6, 6, 6,
        -1,-1,-1,-1,

        -1, 6,-1,-1,
        -1, 6,-1,-1,
        -1, 6,-1,-1,
        -1, 6,-1,-1,
    };
    
    const int GRID_SIZE = 4 * 4;
    const int ROTATION_COUNT = 4;
    const int TYPE_INDEX = GRID_SIZE * ROTATION_COUNT;

    Tile* getPieceDefinition(Tile type, i8 rotation) {
        return &tiles[type * TYPE_INDEX + rotation * GRID_SIZE];
    }
}
}